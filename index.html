import React, { useState } from 'react';
import { Check, X, Shield, Zap, TrendingUp, DollarSign, Globe, Lock, Languages } from 'lucide-react';

const PricingComparison = () => {
  const [billingCycle, setBillingCycle] = useState('yearly'); // 'monthly', 'semi-annual', 'yearly'
  const [lang, setLang] = useState('tc'); // 'tc', 'sc', 'en'

  // 翻譯資料庫
  const t = {
    tc: {
      title: "FX Spectrum 專業授權方案",
      subtitle: "選擇最適合您的交易規模與平台的方案",
      monthly: "月繳",
      semi: "半年繳",
      yearly: "年繳 (最划算)",
      limitedTitle: "限時推廣方案",
      limitedSub: "※ 僅限首 10 位推廣名額, 數量有限",
      restrictedTitle: "綁定指定平台付費方案",
      restrictedSub: "適合單一券商交易者",
      unrestrictedTitle: "不綁定指定平台方案",
      unrestrictedSub: "專業交易員首選",
      contactManager: "洽詢管理員",
      fullyUnlocked: "完全解鎖",
      featureBroker: "綁定官方指定合作券商",
      featureBrokerRestricted: "官方指定券商帳號 (不可自選)",
      featureUnrestricted: "不限券商、不限帳號數量",
      featureStrategy: "專屬一對一策略調優服務",
      featureSupport: "支持線上技術諮詢",
      featureBeta: "優先參與 Beta 新工具測試",
      featureUpdate: "全套工具自動更新服務",
      highlight1: "極速下單",
      highlight1Sub: "毫秒級毫無延遲",
      highlight2: "資金安全",
      highlight2Sub: "嚴格執行止損保本",
      highlight3: "利潤極大化",
      highlight3Sub: "全自動移動止盈",
      highlight4: "精算配置",
      highlight4Sub: "自動計算每單風險",
      footer1: "* 付費方案均包含永久技術支援與版本更新。",
      footer2: "* 「指定平台」係指該授權僅限於與本司簽約之券商帳號。",
      btnClaim: "立即前往領取",
      btnSubscribe: "立即訂閱",
      btnContact: "聯絡官方獲取授權",
      cycleLabel: { monthly: "/ 月", "semi-annual": "/ 半年", yearly: "/ 年" }
    },
    sc: {
      title: "FX Spectrum 专业授权方案",
      subtitle: "选择最适合您的交易规模与平台的方案",
      monthly: "按月支付",
      semi: "按半年支付",
      yearly: "按年支付 (最划算)",
      limitedTitle: "限时推广方案",
      limitedSub: "※ 仅限首 10 位推广名额, 数量有限",
      restrictedTitle: "绑定指定平台付费方案",
      restrictedSub: "适合单一券商交易者",
      unrestrictedTitle: "不绑定指定平台方案",
      unrestrictedSub: "专业交易员首选",
      contactManager: "洽询管理员",
      fullyUnlocked: "完全解锁",
      featureBroker: "绑定官方指定合作券商",
      featureBrokerRestricted: "官方指定券商账号 (不可自选)",
      featureUnrestricted: "不限券商、不限账号数量",
      featureStrategy: "专属一对一策略调优服务",
      featureSupport: "支持在线技术咨询",
      featureBeta: "优先参与 Beta 新工具测试",
      featureUpdate: "全套工具自动更新服务",
      highlight1: "极速下单",
      highlight1Sub: "毫秒级毫无延迟",
      highlight2: "资金安全",
      highlight2Sub: "严格执行止损保本",
      highlight3: "利润极大化",
      highlight3Sub: "全自动移动止盈",
      highlight4: "精算配置",
      highlight4Sub: "自动计算每单风险",
      footer1: "* 付费方案均包含永久技术支援与版本更新。",
      footer2: "* 「指定平台」系指该授权仅限于与本司签约之券商账号。",
      btnClaim: "立即前往领取",
      btnSubscribe: "立即订阅",
      btnContact: "联络官方获取授权",
      cycleLabel: { monthly: "/ 月", "semi-annual": "/ 半年", yearly: "/ 年" }
    },
    en: {
      title: "FX Spectrum Professional Licensing",
      subtitle: "Choose the plan that best fits your trading scale and platform",
      monthly: "Monthly",
      semi: "Semi-Annual",
      yearly: "Yearly (Best Value)",
      limitedTitle: "Limited Promotion",
      limitedSub: "※ Limited to first 10 slots, availability is limited",
      restrictedTitle: "Platform-Restricted Plan",
      restrictedSub: "Ideal for single broker traders",
      unrestrictedTitle: "Unrestricted Platform Plan",
      unrestrictedSub: "First choice for professional traders",
      contactManager: "Contact Manager",
      fullyUnlocked: "Fully Unlocked",
      featureBroker: "Bound to official partner brokers",
      featureBrokerRestricted: "Official broker account (Non-selectable)",
      featureUnrestricted: "No broker limits, unlimited accounts",
      featureStrategy: "Exclusive 1-on-1 Strategy Optimization",
      featureSupport: "Online Technical Support",
      featureBeta: "Priority access to Beta tools",
      featureUpdate: "Automatic tool update service",
      highlight1: "Rapid Execution",
      highlight1Sub: "Millisecond latency-free",
      highlight2: "Capital Security",
      highlight2Sub: "Strict Breakeven execution",
      highlight3: "Profit Max",
      highlight3Sub: "Auto Trailing Stop",
      highlight4: "Risk Calculation",
      highlight4Sub: "Auto-calculate lot size",
      footer1: "* Paid plans include lifetime technical support and updates.",
      footer2: "* 'Restricted Platform' refers to licensing limited to contracted brokers.",
      btnClaim: "Claim Now",
      btnSubscribe: "Subscribe Now",
      btnContact: "Contact for Authorization",
      cycleLabel: { monthly: "/ mo", "semi-annual": "/ 6-mo", yearly: "/ yr" }
    }
  };

  const tools = [
    { name: 'T Assistant', desc: '毫秒級極速搶單 / Lightning Execution' },
    { name: 'Exit Plus', desc: '全自動保本鎖潤 / Auto Breakeven' },
    { name: 'Risk Reward', desc: '畫線精算手數 / Precision Sizing' },
  ];

  const prices = {
    limited: { monthly: 0, semi: 0, yearly: 0 },
    restricted: { monthly: 200, semi: 600, yearly: 1000 },
    unrestricted: { monthly: 500, semi: 2700, yearly: 5000 }
  };

  const getPrice = (plan) => {
    if (plan === 'limited') return 0;
    const cycleKey = billingCycle === 'semi-annual' ? 'semi' : billingCycle;
    return prices[plan][cycleKey];
  };

  return (
    <div className="min-h-screen bg-slate-950 text-white p-4 md:p-8 font-sans">
      <div className="max-w-7xl mx-auto">
        
        {/* Top Header with Language Switcher */}
        <div className="flex justify-end mb-4">
          <div className="inline-flex bg-slate-900 p-1 rounded-xl border border-slate-800">
            {[
              { id: 'tc', label: '繁' },
              { id: 'sc', label: '简' },
              { id: 'en', label: 'EN' }
            ].map((l) => (
              <button
                key={l.id}
                onClick={() => setLang(l.id)}
                className={`px-3 py-1 rounded-lg text-xs font-bold transition-all ${lang === l.id ? 'bg-slate-700 text-white' : 'text-slate-500 hover:text-slate-300'}`}
              >
                {l.label}
              </button>
            ))}
          </div>
        </div>

        {/* 標題區域 */}
        <div className="text-center mb-10">
          <h1 className="text-3xl md:text-5xl font-bold bg-gradient-to-r from-yellow-400 via-orange-400 to-yellow-500 bg-clip-text text-transparent mb-4">
            {t[lang].title}
          </h1>
          <p className="text-slate-400 text-lg mb-8">
            {t[lang].subtitle}
          </p>

          {/* 計費週期切換 */}
          <div className="inline-flex bg-slate-900 p-1 rounded-2xl border border-slate-800">
            <button 
              onClick={() => setBillingCycle('monthly')}
              className={`px-6 py-2 rounded-xl text-sm font-bold transition-all ${billingCycle === 'monthly' ? 'bg-slate-700 text-white shadow-lg' : 'text-slate-500 hover:text-slate-300'}`}
            >
              {t[lang].monthly}
            </button>
            <button 
              onClick={() => setBillingCycle('semi-annual')}
              className={`px-6 py-2 rounded-xl text-sm font-bold transition-all ${billingCycle === 'semi-annual' ? 'bg-slate-700 text-white shadow-lg' : 'text-slate-500 hover:text-slate-300'}`}
            >
              {t[lang].semi}
            </button>
            <button 
              onClick={() => setBillingCycle('yearly')}
              className={`px-6 py-2 rounded-xl text-sm font-bold transition-all ${billingCycle === 'yearly' ? 'bg-slate-700 text-white shadow-lg' : 'text-slate-500 hover:text-slate-300'}`}
            >
              {t[lang].yearly}
            </button>
          </div>
        </div>

        {/* 價格網格 */}
        <div className="grid lg:grid-cols-3 gap-6">
          
          {/* 方案 1: 限時推廣 (Limited Free) */}
          <div className="relative bg-slate-900 border border-yellow-500/30 rounded-3xl p-8 flex flex-col transition-all hover:border-yellow-500 shadow-xl shadow-yellow-500/5">
            <div className="absolute -top-4 left-1/2 -translate-x-1/2 bg-yellow-500 text-slate-950 px-4 py-1 rounded-full font-black text-xs uppercase tracking-widest">
              Limited Time
            </div>
            <div className="mb-6">
              <h3 className="text-xl font-bold text-yellow-500 mb-2">{t[lang].limitedTitle}</h3>
              <div className="flex items-baseline">
                <span className="text-4xl font-black">$0</span>
                {/* 修正點：限時推廣方案現在也會跟隨頂部切換週期顯示正確文字 */}
                <span className="ml-2 text-slate-500 text-sm">{t[lang].cycleLabel[billingCycle]}</span>
              </div>
              <p className="text-xs text-yellow-500/70 mt-2 font-medium">{t[lang].limitedSub}</p>
            </div>

            <ul className="space-y-4 mb-8 flex-grow">
              <li className="flex items-center text-sm text-slate-300">
                <Lock className="text-yellow-500 mr-3 shrink-0" size={16} />
                <span>{t[lang].featureBroker}</span>
              </li>
              {tools.map((tool, i) => (
                <li key={i} className="flex items-start text-sm text-slate-400">
                  <Check className="text-green-500 mr-3 mt-1 shrink-0" size={16} />
                  <span>
                    {tool.name}
                    {(tool.name === 'Exit Plus' || tool.name === 'Risk Reward') && ` (${t[lang].contactManager})`}
                  </span>
                </li>
              ))}
            </ul>

            <button className="w-full py-4 bg-yellow-500 hover:bg-yellow-400 text-slate-950 font-black rounded-2xl transition-all shadow-lg shadow-yellow-500/10">
              {t[lang].btnClaim}
            </button>
          </div>

          {/* 方案 2: 標準付費 (Standard Restricted) */}
          <div className="relative bg-slate-900 border border-blue-500/50 rounded-3xl p-8 flex flex-col transition-all shadow-xl shadow-blue-500/5 group">
            <div className="mb-6">
              <h3 className="text-xl font-bold text-blue-400 mb-2">{t[lang].restrictedTitle}</h3>
              <div className="flex items-baseline">
                <span className="text-4xl font-black">${getPrice('restricted').toLocaleString()}</span>
                <span className="ml-2 text-slate-500 text-sm">{t[lang].cycleLabel[billingCycle]}</span>
              </div>
              <p className="text-xs text-slate-500 mt-2">{t[lang].restrictedSub}</p>
            </div>

            <ul className="space-y-4 mb-8 flex-grow">
              <li className="flex items-center text-sm text-slate-200">
                <Lock className="text-blue-400 mr-3 shrink-0" size={16} />
                <span>{t[lang].featureBrokerRestricted}</span>
              </li>
              {tools.map((tool, i) => (
                <li key={i} className="flex items-start text-sm text-slate-200">
                  <Check className="text-green-400 mr-3 mt-1 shrink-0" size={16} />
                  <span>
                    {tool.name}
                    {(tool.name === 'Exit Plus' || tool.name === 'Risk Reward') 
                      ? ` (${t[lang].contactManager})` 
                      : (billingCycle === 'yearly' ? ` (${t[lang].fullyUnlocked})` : '')
                    }
                  </span>
                </li>
              ))}
              <li className="flex items-center text-sm text-slate-200">
                <Check className="text-green-400 mr-3 shrink-0" size={16} />
                <span>{t[lang].featureStrategy}</span>
              </li>
              <li className="flex items-center text-sm text-slate-200">
                <Check className="text-green-400 mr-3 shrink-0" size={16} />
                <span>{t[lang].featureSupport}</span>
              </li>
            </ul>

            <button className="w-full py-4 bg-blue-600 hover:bg-blue-500 text-white font-black rounded-2xl transition-all shadow-lg shadow-blue-500/20">
              {t[lang].btnSubscribe}
            </button>
          </div>

          {/* 方案 3: 進階全能 (Pro Unrestricted) */}
          <div className="relative bg-gradient-to-b from-slate-800 to-slate-900 border border-purple-500/50 rounded-3xl p-8 flex flex-col transition-all shadow-xl shadow-purple-500/10">
            <div className="mb-6">
              <h3 className="text-xl font-bold text-purple-400 mb-2">{t[lang].unrestrictedTitle}</h3>
              <div className="flex items-baseline">
                <span className="text-4xl font-black">${getPrice('unrestricted').toLocaleString()}</span>
                <span className="ml-2 text-slate-500 text-sm">{t[lang].cycleLabel[billingCycle]}</span>
              </div>
              <p className="text-xs text-slate-500 mt-2 text-purple-300/70">{t[lang].unrestrictedSub}</p>
            </div>

            <ul className="space-y-4 mb-8 flex-grow">
              <li className="flex items-center text-sm text-white font-semibold">
                <Globe className="text-purple-400 mr-3 shrink-0" size={18} />
                <span>{t[lang].featureUnrestricted}</span>
              </li>
              {tools.map((tool, i) => (
                <li key={i} className="flex items-start text-sm text-white">
                  <Check className="text-green-400 mr-3 mt-1 shrink-0" size={16} />
                  <span>
                    {tool.name}
                    {(tool.name === 'Exit Plus' || tool.name === 'Risk Reward') 
                      ? ` (${t[lang].contactManager})` 
                      : (billingCycle === 'yearly' ? ` (${t[lang].fullyUnlocked})` : '')
                    }
                  </span>
                </li>
              ))}
              <li className="flex items-center text-sm text-white">
                <Check className="text-green-400 mr-3 shrink-0" size={16} />
                <span>{t[lang].featureStrategy}</span>
              </li>
              <li className="flex items-center text-sm text-white">
                <Check className="text-green-400 mr-3 shrink-0" size={16} />
                <span>{t[lang].featureSupport}</span>
              </li>
            </ul>

            <button className="w-full py-4 bg-purple-600 hover:bg-purple-500 text-white font-black rounded-2xl transition-all shadow-lg shadow-purple-500/40">
              {t[lang].btnContact}
            </button>
          </div>

        </div>

        {/* 功能亮點列 */}
        <div className="mt-16 grid grid-cols-2 md:grid-cols-4 gap-4">
          {[
            { icon: <Zap className="text-yellow-500" />, title: t[lang].highlight1, sub: t[lang].highlight1Sub },
            { icon: <Shield className="text-blue-500" />, title: t[lang].highlight2, sub: t[lang].highlight2Sub },
            { icon: <TrendingUp className="text-green-500" />, title: t[lang].highlight3, sub: t[lang].highlight3Sub },
            { icon: <DollarSign className="text-orange-500" />, title: t[lang].highlight4, sub: t[lang].highlight4Sub }
          ].map((item, idx) => (
            <div key={idx} className="bg-slate-900/50 border border-slate-800 p-4 rounded-2xl text-center">
              <div className="flex justify-center mb-2">{item.icon}</div>
              <div className="text-sm font-bold">{item.title}</div>
              <div className="text-[10px] text-slate-500">{item.sub}</div>
            </div>
          ))}
        </div>

        {/* 底部附註 */}
        <div className="mt-12 text-center space-y-2">
          <p className="text-slate-500 text-xs italic">
            {t[lang].footer1}
          </p>
          <p className="text-slate-500 text-xs italic">
            {t[lang].footer2}
          </p>
        </div>
      </div>
    </div>
  );
};

export default PricingComparison;